{% extends "::baseForAdmin.html.twig" %}

{% block title %}
    Ajouter une matiere
{% endblock %}

{% block script %}
    <script language="JavaScript">
        function afficherMatiere() {
            $("#matieresExistantes").slideToggle();
        }

        $("document").ready(function () {
            $("#message").slideUp();
            $("#matieresExistantes").hide();

            $("#btnAjouter").click(function () {

                var libMat = $("#libelleMatiere");
                if (libMat.val() == "") {
                    $("#message").html("Veuillez remplier le champs !");
                    $("#message").slideDown();
                    setTimeout(function () {
                        $("#message").slideUp();
                    }, 2500);
                } else {

                    $.ajax({

                        url: "{{ path('ajouterMatiereAjax') }}",
                        method: "GET",
                        data: $("#form").serialize(),
                        success: function (response) {
                            response = JSON.parse(response);

                            if (response.status == "existed") {
                                $("#message").addClass("alert-danger");
                                $("#message").removeClass("alert-success");
                                $("#message").html("La matiere saisiée est déjà existée");
                                $("#message").slideDown();
                                setTimeout(function () {
                                    $("#message").slideUp();
                                }, 2500);
                            } else {
                                $("#message").removeClass("alert-danger");
                                $("#message").addClass("alert-success");
                                $("#message").html("Ajout avec succès !");
                                $("#message").slideDown();
                                setTimeout(function () {
                                    $("#message").slideUp();
                                }, 2500);
                            }
                        }


                    });


                }


            });


        });


    </script>


{% endblock %}


{% block mainContent %}

    <h1 align="center"></h1>

    <hr class="hr-4">
    <div class="col-xs-12">
        <div class="row" align="center">
            <div class="alert alert-danger" id="message" style="display: none"></div>
            <form name="form" id="form">
                <table border="0" align="center">

                    <tr align="center">
                        <td><h4>Libellé matiere : </h4></td>
                        <td><input name="libelleMatiere" id="libelleMatiere" type="text"></td>
                    </tr>
                    <tr align="center">
                        <td colspan="2"><input type="button" class="btn btn-primary" id="btnAjouter"
                                               value="Ajouter matiere" style="margin-top: 25px"></td>
                    </tr>

                </table>


            </form>

            <hr class="hr-4">

            <input type="button" class="btn btn-primary" value="Afficher les matieres existantes"
                   onclick=afficherMatiere()>

        </div>

        <hr class="hr-4">
        <div id="matieresExistantes" align="center">

            <h4>Les matières existantes pour l'année
                scolaire {{ app.session.get("anneeScolaireCourante").periode }}</h4>
            <div>

                <table class="table table-responsive" align="center" width="50%">
                    <tr class="table-header" align="center">
                        <td><h4>Matiere</h4></td>
                    </tr>
                    {% for matiere in listMatiere %}

                        <tr align="center">
                            <td><h5>{{ matiere.libelleMatiere }}</h5></td>
                        </tr>

                    {% endfor %}
                </table>

            </div>

        </div>

    </div>



{% endblock %}