{% extends "::baseForAdmin.html.twig" %}

{% block title %}
    Liste des matieres
{% endblock %}
{% block script %}
    <script language="javascript">
        function voirInfoMatiere(libMatiere) {
            $("#matiere").html(libMatiere);
            $("#spanModalContainer").html("");
            $("#modalSpinner").show();
            console.log(libMatiere);
            var tableau = "<table class='table table-responsive' border='1' >";
            tableau += "<tr align='center' class='table-header'><td>Enseignant</td><td>Groupe</td></tr>";
            $.ajax({
                url: "{{ path('voirInfoMatiereAJAX') }}",
                data: {"libMatiere": libMatiere},
                method: "GET",
                success: function (response) {
                    response = JSON.parse(response);
                    console.log(response);
                    $.each(response.listMat, function (i, item) {
                        var line = "<tr align='center'><td>" + item.enseignant + "</td><td>" + item.groupe + "</td></tr>";
                        tableau += line;
                    });

                    tableau += "</table>";
                    console.log(tableau);
                    $("#modalSpinner").hide();
                    $("#spanModalContainer").fadeIn();
                    $("#spanModalContainer").html(tableau);
                }
            });


        }
    </script>


{% endblock %}

{% block mainContent %}

    <hr class="hr-4">


    <div class="col-xs-12">

        <div class="row">

            <table class="table table-responsive" align="center">
                <tr class="table-header" align="center">
                    <td>Libell√© Matiere</td>
                    <td>Plus d'information</td>
                </tr>
                {% for mat in listeMatieres %}
                    <tr align="center">
                        <td>{{ mat.libelleMatiere }}</td>
                        <td><input type="button" value="Voir information" data-toggle='modal' data-target='#myModal'
                                   class="btn btn-primary" onclick="voirInfoMatiere('{{ mat.libelleMatiere }}')"></td>
                    </tr>

                {% endfor %}


            </table>


        </div>

        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">


                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" align="center"><span id="matiere"></span></h4>
                    </div>
                    <div class="modal-body" align="center">
                        <center><i class="ace-icon fa fa-spin fa-refresh blue bigger-300" id="modalSpinner"></i>
                        </center>
                        <div id="spanModalContainer">

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>

                    </div>

                </div>

            </div>
        </div>

    </div>


{% endblock %}