{% extends "::baseForEnseignant.html.twig" %}


{% block title %}
    Voir Cahier de texte
{% endblock %}

{% block script %}
    <script language="JavaScript">

        function voirPlus (groupe, matiere , dateHeure , idPage) {
            $("#modalSpinner").show();
            $("#contenuPageCahier").hide();
            $("#contenuPageCahier").html("");
             $("#nomGroupe").html("Le "+dateHeure+" - "+matiere+" - "+groupe);
             $.ajax({
                    url:"{{ path('voirPageCahierAJAX') }}",
                    method:"GET",
                 data:{ "idPage" : idPage }, 
                 success:function (response) {
                     console.log(response);
                     $("#modalSpinner").hide();
                     $("#contenuPageCahier").show();
                     $("#contenuPageCahier").html(response);
                 }


             });
        }


        $("document").ready(function () {
           $("#tableCahier").DataTable() ;
        });
    </script>
{% endblock %}


{% block mainContent %}
   <hr class="hr-4">
    <div class="col-xs-12">
        <div class="row">

            <table id="tableCahier" class="display" cellspacing="0" width="95%">
                <thead>
                <tr>

                    <th>Matiere</th>
                    <th>Groupe</th>
                    <th>Date</th>
                    <th>Lire</th>

                </tr>
                </thead>
                <tfoot>
                <tr>

                    <th>Matiere</th>
                    <th>Groupe</th>
                    <th>Date</th>
                    <th>Lire</th>

                </tr>
                </tfoot>
                <tbody id="tableBody">

                {% for page in pagecahier | sortbyfield('date') %}

                    <tr align="center">
                        <td> {{ page.groupe.nomgroupe }} {{ page.groupe.numgroupe }}</td>
                        <td>{{ page.matiere.libelleMatiere }}</td>
                        <td> {{ page.date | date("d/m/Y H:i") }}</td>
                        <td><input type="button" onclick="voirPlus('{{ page.groupe.nomgroupe }} {{ page.groupe.numgroupe }}','{{ page.matiere.libellematiere }}','{{ page.date | date("d/m/Y H:i") }}','{{ page.id }}')" class="btn btn-primary" value="Lire" data-toggle='modal' data-target='#myModal' ></td>
                    </tr>

                {% endfor %}


                </tbody>
            </table>




        </div>
    </div>



    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">


                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><span id="nomGroupe">Veuillez patienter...</span></h4>
                </div>
                <div class="modal-body" align="center">
                    <center><i class="ace-icon fa fa-spin fa-refresh blue bigger-300" id="modalSpinner"></i>
                    </center>
                    <div id="spanModalContainer">

                        <p>
                            <pre id="contenuPageCahier" style="margin-top: 15px" style="display: none"></pre>
                        </p>


                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>

                </div>

            </div>

        </div>
    </div>


{% endblock %}